#!/bin/sh

# Git Push ì•ˆì „ì„± ê²€ì¦ íŒŒì´í”„ë¼ì¸
# 1. ë¸Œëœì¹˜ íŒ¨í„´ ê²€ì‚¬
BRANCH_NAME=$(git symbolic-ref --short HEAD)
if ! echo "$BRANCH_NAME" | grep -Eq '^(main|release|dev|hotfix|feat\/[a-z0-9._-]+|fix\/[a-z0-9._-]+|refactor\/[a-z0-9._-]+|test\/[a-z0-9._-]+|docs\/[a-z0-9._-]+|chore\/[a-z0-9._-]+)$'; then
  echo "ğŸš« ë¸Œëœì¹˜ ì´ë¦„ì´ ê·œì¹™ì— ë§ì§€ ì•ŠìŠµë‹ˆë‹¤."
  echo "í—ˆìš© íŒ¨í„´: main, release, dev, hotfix, <type>/<desc>"
  echo "ì˜ˆ: feat/login-form, fix/button-error"
  exit 1
fi

# 2. ì½”ë“œ ìŠ¤íƒ€ì¼ ê·œì¹™ ê²€ì¦
echo "â–¶ ESLint(strict) ì‹¤í–‰â€¦"
yarn lint:strict || exit 1